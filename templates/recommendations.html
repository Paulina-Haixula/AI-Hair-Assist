{% extends "layout.html" %}
{% block content %}

<div class="card p-5 shadow-lg" style="max-width: 900px; margin: auto; background: rgba(255,255,255,0.9);">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="m-0">Your Personalized Haircare Recommendations</h2>

        <!-- Logout Button -->
        <a href="{{ url_for('auth.login') }}" class="btn btn-danger btn-lg">
            Logout
        </a>
    </div>

    <p class="text-muted mb-4">
        Click the button below to generate your complete haircare routine from the 4 recommender systems.
    </p>

    <!-- Generate Button -->
    <div class="text-center mb-4">
        <a href="{{ url_for('recommend.build_all_recommendations', survey_id=survey_id) }}"
           class="btn btn-primary btn-lg px-5">
            Generate Recommendations
        </a>
    </div>

    <hr>

    <!-- Display Recommendations Returned by Backend -->
    {% if recommendations %}
    <div class="mt-4">

        <!-- Breakage -->
        {% if recommendations.breakage %}
        <h4 class="mt-3">Breakage Recommendations</h4>
        <ul>
            {% for item in recommendations.breakage %}
            <li>{{ item }}</li>
            {% endfor %}
        </ul>
        {% endif %}

        <!-- Porosity -->
        {% if recommendations.porosity %}
        <h4 class="mt-4">Porosity Recommendations</h4>
        <ul>
            {% for item in recommendations.porosity %}
            <li>{{ item }}</li>
            {% endfor %}
        </ul>
        {% endif %}

        <!-- Ingredient Compatibility -->
        {% if recommendations.ingredients %}
        <h4 class="mt-4">Ingredient Compatibility</h4>
        <ul>
            {% for item in recommendations.ingredients %}
            <li>{{ item }}</li>
            {% endfor %}
        </ul>
        {% endif %}

        <!-- Disease Scalp/Health Detector -->
        {% if recommendations.disease %}
        <h4 class="mt-4">Scalp / Disease Detection</h4>
        <ul>
            {% for item in recommendations.disease %}
            <li>{{ item }}</li>
            {% endfor %}
        </ul>
        {% endif %}

    </div>
    {% else %}
    <p class="text-center text-muted mt-4">
        No recommendations yet. Please click the button above to generate them.
    </p>
    {% endif %}

</div>

{% endblock %}
